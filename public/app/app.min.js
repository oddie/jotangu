!function(){"use strict";function t(t,o){t.html5Mode({enabled:!0,requireBase:!1}),o.otherwise("/")}angular.module("jotanguApp",["ui.router","angular-loading-bar","jotanguApp.home","jotanguApp.navbar","jotanguApp.signin","jotanguApp.signup","jotanguApp.profile"]).config(t),t.$inject=["$locationProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t){t.tokenPrefix="jotangu",t.loginOnSignup=!0,t.loginUrl="http://jotangu.app/api/auth/signin",t.signupUrl="http://jotangu.app/api/auth/signup",t.facebook({clientId:"181399072221440",url:"/api/auth/facebook"}),t.google({clientId:"63464837467-5r6qshnet493jdsa5kq3dto7l22dol9m.apps.googleusercontent.com",url:"/api/auth/google"}),t.twitter({clientId:"T0S6Ql8zwyikGOTSgD7mmz1BO",url:"/api/auth/twitter"}),t.oauth2({name:"vkontakte",url:"/api/auth/vkontakte",redirectUri:window.location.origin||window.location.protocol+"//"+window.location.host,clientId:"5246226",authorizationEndpoint:"http://oauth.vk.com/authorize",scope:"email",display:"popup",responseType:"code",requiredUrlParams:["response_type","client_id","redirect_uri","display","scope","v"],scopeDelimiter:",",v:"5.37"})}function o(t){function o(){return t.isAuthenticated()}function e(o,e,r){return t.login(o).then(e)["catch"](r)}function r(){t.logout()}function n(o,e,r){return t.signup(o).then(function(o){t.setToken(o),e.call()})["catch"](r)}function i(o,e,r){return t.authenticate(o).then(e)["catch"](r)}this.isAuthenticated=o,this.login=e,this.logout=r,this.register=n,this.loginSocial=i}angular.module("jotanguApp.auth.svc",["satellizer"]).config(t).service("AuthService",o),t.$inject=["$authProvider"],o.$inject=["$auth"]}(),function(){"use strict";function t(t,o,e){function r(){return i.user?i.user:(e.isAuthenticated()&&o.get("/api/user/profile").then(function(o){i.user=o.data.user,console.log(i.user),t.$broadcast("reloadUser")}),i.user)}function n(){delete i.user,t.$broadcast("reloadUser")}var i=this;return i.user=null,{user:r,clear:n}}angular.module("jotanguApp.user.fct",["jotanguApp.auth.svc"]).factory("UserFactory",t),t.$inject=["$rootScope","$http","AuthService"]}(),function(){"use strict";function t(t){t.state("signin",{url:"/signin",templateUrl:"/app/components/signin/signin.html",controller:"SigninCtrl",controllerAs:"signin"})}function o(t,o){function e(){function e(){t.go("profile",{})}function r(t){return n.error.email="",n.error.password="",401===t.status?void(n.error.password="Invalid credentials. Check your e-mail and password."):void(422===t.status?(t.data.email&&(n.error.email=t.data.email[0]),t.data.password&&(n.error.password=t.data.password[0])):n.error.password="Server error. Try again.")}var i={email:n.email,password:n.password};o.login(i,e,r)}function r(e){function r(o){console.log(o),t.go("profile",{})}function n(t){console.log(t)}o.loginSocial(e,r,n)}var n=this;n.error={first_name:"",last_name:"",email:"",password:""},n.login=e,n.socialLogin=r}angular.module("jotanguApp.signin",["satellizer","ui.router","jotanguApp.auth.svc"]).config(t).controller("SigninCtrl",o),t.$inject=["$stateProvider"],o.$inject=["$state","AuthService"]}(),function(){"use strict";function t(t){t.state("home",{url:"/",templateUrl:"/app/components/home/home.html",controller:"HomeCtrl",controllerAs:"home"})}function o(t){t.curPath="home"}angular.module("jotanguApp.home",["ui.router"]).config(t).controller("HomeCtrl",o),t.$inject=["$stateProvider"],o.$inject=["$rootScope"]}(),function(){"use strict";function t(t,o,e,r){function n(){return e.isAuthenticated()}function i(){e.logout(),r.clear(),o.go("home")}var a=this;a.user=r.user(),a.isAuthenticated=n,a.logout=i,t.$on("reloadUser",function(t,o){a.user=r.user()})}angular.module("jotanguApp.navbar",["jotanguApp.auth.svc","jotanguApp.user.fct"]).controller("NavCtrl",t),t.$inject=["$scope","$state","AuthService","UserFactory"]}(),function(){"use strict";function t(t){t.state("signup",{url:"/signup",templateUrl:"/app/components/signup/signup.html",controller:"SignupCtrl",controllerAs:"signup"})}function o(t,o){function e(){function e(o){t.go("profile",{})}function r(t){n.error.first_name="",n.error.last_name="",n.error.email="",n.error.password="",422===t.status&&(t.data.first_name&&(n.error.first_name=t.data.first_name[0]),t.data.last_name&&(n.error.last_name=t.data.last_name[0]),t.data.email&&(n.error.email=t.data.email[0]),t.data.password&&(n.error.password=t.data.password[0]))}var i={first_name:n.first_name,last_name:n.last_name,email:n.email,password:n.password};o.register(i,e,r)}function r(e){function r(){t.go("profile",{})}function n(t){console.log(t)}o.loginSocial(e,r,n)}var n=this;n.error={},n.signup=e,n.socialLogin=r}angular.module("jotanguApp.signup",["satellizer","ui.router","jotanguApp.auth.svc"]).config(t).controller("SignupCtrl",o),t.$inject=["$stateProvider"],o.$inject=["$state","AuthService"]}(),function(){"use strict";function t(t){t.state("profile",{url:"/profile",templateUrl:"/app/components/profile/profile.html",controller:"ProfileCtrl",controllerAs:"profile"})}function o(t,o,e,r,n){var i=this;t.curPath="profile",r.isAuthenticated()||e.go("signin"),i.user=n.user(),o.$on("reloadUser",function(t,o){i.user=n.user()})}angular.module("jotanguApp.profile",["jotanguApp.user.fct","jotanguApp.auth.svc","ui.router"]).config(t).controller("ProfileCtrl",o),t.$inject=["$stateProvider"],o.$inject=["$rootScope","$scope","$state","AuthService","UserFactory"]}();